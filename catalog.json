[ { "title": "test", "path": "posts/test.html", "date": "Feb 5 16:17:51 2014", "content": "<h1>SIGKILL</h1> <p>The problem is about <code>forever</code>. While using this module to start a script, everything is OK, at an opposite of this operation, everything is not pretty good. Following simple codes is an example:</p> <p><code> process.on(&quot;exit&quot;,function(){ // cleanup some bad stuff, failed stuff. }); </code></p> <p>At 1st time, I did a lookup in forever, then I found it stop a script or process by killing it, namely call the signal named <code>SIGKILL</code>. Codes is fixed on: <a href="https://github.com/nodejitsu/forever-monitor/blob/master/lib/forever-monitor/monitor.js#L352">nodejitsu/forever-monitor</a></p> <p>I was actually thinking that the full success would be coming, such that I coded this:</p> <p><code> process.on(&quot;SIGKILL&quot;,function(){ // cleanup some bad stuff, failed stuff. } </code></p> <p>Fool, fuck self-confidence. Had googled some blogs, I realized this way is absolutely wrong. I cannot handle the <code>SIGKILL</code>, It&#39;s an absolute quit system signal, then I know why <code>forever</code> stop scripts by this way.</p> <p>But what is this problem&#39;s solution? Of course I find an answer to solve it, like that:</p> <p><code> // head of script // cleanup some bad stuff, failed stuff, // what i wanna clean in while previous process is killed </code></p> <p>That means that I make cleanup in next startup for this script.</p>" }]
