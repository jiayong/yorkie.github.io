#!/usr/bin/env node

var fs = require('fs');
var jade = require('jade');

var catalog = require('./catalog.json').sort(function(prev, next) {
  return new Date(next.date) - new Date(prev.date);
}).map(function(post) {
  post.html = fs.readFileSync(post.path, 'utf8');
  return post;
})

var html = jade.renderFile('./templates/home.jade', {
  'title': 'Under Tech.',
  'posts': catalog
});
fs.writeFileSync('index.html', html);